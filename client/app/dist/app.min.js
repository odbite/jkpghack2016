"use strict";angular.module("navotron.templates",["js/components/credits/creditPackage.jade","js/components/credits/credits.jade","js/components/login/loginView.jade","js/components/navbar/controlBox/controlBoxView.jade","js/components/navbar/navbar.jade","js/components/navbar/popupBox/pbButton.jade","js/components/navbar/popupBox/pbPanel.jade","js/components/utils/modifyField/modifyFieldView.jade","js/components/utils/notification/notification.jade","js/components/workArea/controlPanel/controlPanelView.jade","js/components/workArea/keyword/keyword.jade","js/components/workArea/keyword/keywordList/keywordListView.jade","js/components/workArea/keyword/keywordList/pagination.jade","js/components/workArea/keyword/keywordSearch/keywordSearch.jade","js/components/workArea/node/nodeArea/nodeArea.jade","js/components/workArea/node/nodeArea/nodeTree/nodeTreeItemView.jade","js/components/workArea/node/nodeArea/nodeTree/nodeTreeView.jade","js/components/workArea/node/nodeArea/parentNode/parentNode.jade","js/components/workArea/node/showNode/autoComplete.jade","js/components/workArea/node/showNode/showNodeView.jade","js/components/workArea/popups/addKeywords/addKeywordsView.jade","js/components/workArea/popups/updateKeywords/updateKeywordsView.jade","js/components/workArea/preview/preview.jade","js/components/workArea/preview/previewHelp/previewHelp.jade","js/components/workArea/preview/previewPage/previewPage.jade","js/components/workArea/preview/previewPage/previewPageItem.jade","js/components/workArea/preview/previewText/previewQuestion.jade","js/components/workArea/preview/previewText/previewSection.jade","js/components/workArea/preview/previewText/previewText.jade","js/components/workArea/settings/settingsView.jade","js/components/workArea/workAreaListView.jade","js/components/workArea/workAreaView.jade","js/main.jade"]),angular.module("js/components/credits/creditPackage.jade",[]).run(["$templateCache",function(a){a.put("js/components/credits/creditPackage.jade",'<div class="credit-package"><div class="title">{{title}}</div><div class="price">{{price}} kr</div><div class="units">{{units}} credits</div><div class="button"><button type="button" ng-click="buy()" class="btn btn-warning">Buy now</button></div></div>')}]),angular.module("js/components/credits/credits.jade",[]).run(["$templateCache",function(a){a.put("js/components/credits/credits.jade",'<div ng-controller="creditController as ctrl" class="container credits"><div class="row"><div class="col-md-6 col-md-offset-3"><div class="jumbotron text-center"><h2>Your credits: {{ctrl.creditFactory.units}}</h2></div></div></div><div ng-show="ctrl.creditFactory.lastOrder.id" class="row"><div class="col-md-8 col-md-offset-2"><div class="alert alert-success"><strong>Your order has been created!</strong> An admin will add {{ctrl.creditFactory.lastOrder.units}} units to your account.<br><a ng-click="ctrl.creditFactory.undoOrder()" href="">Undo if this was not your intention</a></div></div></div><div ng-show="ctrl.creditFactory.errorMessage" class="row"><div class="col-md-8 col-md-offset-2"><div class="alert alert-danger"><strong>{{ctrl.creditFactory.errorMessage}}</strong></div></div></div><div class="row"><div class="col-md-4"><credit-package title="Small" price="55" units="100"></credit-package></div><div class="col-md-4"><credit-package title="Standard" price="110" units="200"></credit-package></div><div class="col-md-4"><credit-package title="Big" price="165" units="300"></credit-package></div></div><div class="row"><div class="col-md-12"><h1>What can I get from my credits?</h1><table class="table table-condensed"><thead><tr class="active"><th>Credits</th><th>What can I check?</th><th>What do I get back?</th></tr></thead><tbody><tr><td>10</td><td>1-100 keywords</td><td>Up to 2000 keywords with search volume</td></tr></tbody></table></div></div></div>')}]),angular.module("js/components/login/loginView.jade",[]).run(["$templateCache",function(a){a.put("js/components/login/loginView.jade",'<div class="container"><div class="card card-container"><img src="//ssl.gstatic.com/accounts/ui/avatar_2x.png" class="profile-img-card"><p class="profile-name-card"></p><form name="loginForm" ng-hide="users.isAuthenticated()" class="form-signin"><input type="text" name="username" ng-model="username" placeholder="Username" id="inputUsername" required="required" autofocus="autofocus" class="form-control"><p ng-show="loginForm.username.$error.required &amp;&amp; !loginForm.username.$pristine" class="help-block">Obligatoriskt fält</p><input type="password" name="password" ng-model="password" placeholder="Password" id="inputPassword" required="required" class="form-control"><p ng-show="loginForm.password.$error.required &amp;&amp; !loginForm.password.$pristine" class="help-block">Obligatoriskt fält</p><button type="submit" ng-click="users.loginUser(username, password)" class="btn btn-lg btn-primary btn-signin">Sign in</button></form><h3 ng-show="users.isAuthenticated()" class="logout-button-container"><a ng-click="users.logoutUser()" class="btn btn-primary logout-button">Log out {{ username }}?</a></h3></div></div>')}]),angular.module("js/components/navbar/controlBox/controlBoxView.jade",[]).run(["$templateCache",function(a){a.put("js/components/navbar/controlBox/controlBoxView.jade",'<popup-box><pb-button><div class="pull-right icon"><i class="fa fa-caret-down fa-2x"></i></div><div class="pull-right text">{{ users.getUsername() }}<br>{{ (getActiveWorkArea().site_url) ? getActiveWorkArea().site_url : \'(no workarea selected)\' }}</div></pb-button><pb-panel><div class="row user-info"><div class="col-md-12">{{ users.getUsername() }}</div><div class="col-md-12"><a ui-sref="root.settings">Account settings</a></div></div><div class="row button-bar"><div class="col-md-12"><button ui-sref="root.workArea.navigation" class="btn btn-primary btn-sm">Add new Workarea</button> <button ui-sref="root.login" ng-click="users.logoutUser()" class="btn btn-primary btn-sm pull-right">Log out</button></div></div><div class="row workarea-list"><div class="col-md-12"><h3><i class="fa fa-list"></i>&nbsp; Workareas</h3></div><div class="col-md-12"><div class="input-group input-group-sm"><span class="input-group-addon"><div class="fa fa-search"></div></span> <input type="text" ng-model="search" class="form-control"></div></div><div class="col-md-12"><ul class="list-unstyled"><li ng-repeat="wa in workareas | filter:{$:search}" ng-class="{\'active\' : (wa.hash_id === getActiveWorkArea().hash_id)}"><a ui-sref="root.workArea.navigation({workAreaId: wa.hash_id})" ui-sref-opts="{reload: true}">{{ wa.site_url }}</a></li></ul></div></div><div class="row button-bar"><div class="col-md-12"><a ui-sref="root.workAreaList" ui-sref-opts="{reload: true}">Show all workareas</a></div></div></pb-panel></popup-box>')}]),angular.module("js/components/navbar/navbar.jade",[]).run(["$templateCache",function(a){a.put("js/components/navbar/navbar.jade",'<nav role="navigation" class="navbar navbar-default navbar-custom"><div ng-controller="navbarController as ctrl" class="container-fluid"><div class="navbar-header col-md-2"><a ui-sref="root" class="navbar-brand"><span style="color: #56AAF4">Nav</span><span style="color: #00B500; margin: 4px">o</span><span style="color: #56AAF4">tron</span></a></div><ul ng-if="ctrl.users.isAuthenticated()" class="nav navbar-nav"><li ng-class="{\'activeMenu\': ctrl.includes(\'root.workArea\')}"><a ui-sref="root.workArea.navigation({workAreaId: ctrl.workAreaHelper.getActiveWorkarea().hash_id})">Workarea</a></li><li ui-sref-active="activeMenu"><a ui-sref="root.workAreaSettings">Settings</a></li></ul><ul class="nav navbar-nav navbar-right"><li ui-sref-active="activeMenu" ng-if="ctrl.users.isAuthenticated()"><a ui-sref="root.credits"><i class="fa fa-credit-card"></i> Credits ({{ ctrl.creditFactory.units }})</a></li><li ng-hide="ctrl.users.isAuthenticated()" ui-sref-active="activeMenu"><a ui-sref="root.login"><i class="fa fa-user"></i><span>&nbsp; Log in</span></a></li><li ng-show="ctrl.users.isAuthenticated()"><control-box></control-box></li></ul></div></nav>')}]),angular.module("js/components/navbar/popupBox/pbButton.jade",[]).run(["$templateCache",function(a){a.put("js/components/navbar/popupBox/pbButton.jade",'<pbbutton ng-click="popupBox.open()"><div class="ub-button"><div ng-transclude="ng-transclude"></div></div></pbbutton>')}]),angular.module("js/components/navbar/popupBox/pbPanel.jade",[]).run(["$templateCache",function(a){a.put("js/components/navbar/popupBox/pbPanel.jade",'<div class="ub"><div ng-show="popupBox.isOpen()" class="window"><div ng-transclude="ng-transclude"></div></div></div>')}]),angular.module("js/components/utils/modifyField/modifyFieldView.jade",[]).run(["$templateCache",function(a){a.put("js/components/utils/modifyField/modifyFieldView.jade",'<span ng-hide="editField" ng-click="edit()">{{ field }}</span> <input type="{{ type }}" ng-show="editField" ng-model="newValue" ng-blur="onBlur()" to-select="editField" on-blur="save()" on-enter-press="save()" class="form-control input-sm">')}]),angular.module("js/components/utils/notification/notification.jade",[]).run(["$templateCache",function(a){a.put("js/components/utils/notification/notification.jade",'<div class="notification-container"><div ng-repeat="alert in messages" ng-class="alert.alertClass" ng-show="$index === 0" class="alert">{{ alert.message }} <button type="button" ng-click="messages.splice($index, 1)" class="close"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button></div></div>')}]),angular.module("js/components/workArea/controlPanel/controlPanelView.jade",[]).run(["$templateCache",function(a){a.put("js/components/workArea/controlPanel/controlPanelView.jade",'<div class="row control-panel"><div class="col-md-6"><ul class="nav navbar-nav"><li ng-show="workArea.site_url" class="site-url"><modify-field field="workArea.site_url" on-save="patchWorkArea(workArea, {\'site_url\': newVal})"></modify-field></li><li ng-show="workArea.site_url === undefined" class="site-url">Loading...</li><li class="changes-saved-text"><div ng-show="editing()" class="span">Editing...</div><div ng-hide="editing()" class="span">All changes saved</div></li></ul></div><div class="col-md-6"><ul class="nav navbar-nav pull-right"><li><a class="navbar-button"><div class="fa fa-link"></div>&nbsp; Share</a></li><li><div class="navbar-button-slider"><a ui-sref-active="active" ui-sref="root.workArea.navigation" class="left">Navigation</a><a ui-sref-active="active" ui-sref="root.workArea.preview" class="middle">Preview</a><a ui-sref-active="active" ui-sref="root.workArea.keywords" class="right">Keywordlist</a></div></li></ul></div></div>')}]),angular.module("js/components/workArea/keyword/keyword.jade",[]).run(["$templateCache",function(a){a.put("js/components/workArea/keyword/keyword.jade",'<div class="col-md-12"><keyword-search active-workarea="activeWorkarea"></keyword-search></div><div class="col-md-12"><keyword-list></keyword-list></div>')}]),angular.module("js/components/workArea/keyword/keywordList/keywordListView.jade",[]).run(["$templateCache",function(a){a.put("js/components/workArea/keyword/keywordList/keywordListView.jade",'<div ng-controller="keywordListController as ctrl" class="row smart-table"><div st-pipe="ctrl.keywordListFactory.keywords.callServer" st-table="displayed"><div class="btn-group-sm menu-bar col-md-12"><div class="row"><div class="col-md-9"><button class="btn btn-default"><st-select-all all="ctrl.keywordListFactory.keywords.results"></st-select-all></button> <button type="button" ng-click="ctrl.keywordListFactory.removeKeywords()" class="btn btn-default"><i class="fa fa-trash"></i>&nbsp; Delete</button><div class="vertical-divider"></div><button type="button" ng-click="ctrl.keywordListFactory.addKeywords()" class="btn btn-default"><i class="fa fa-plus"></i>&nbsp; Add</button></div><div class="col-md-3"><input st-search="search" placeholder="Search for keyword" class="form-control pull-right"></div></div></div><table class="table"><thead><tr class="head-titles"><th></th><th st-sort="keyword"><strong>Keywords</strong></th><th st-sort="volume" class="text-right"><strong>Search Volume</strong></th><th></th></tr></thead><tbody ng-class="{ cloak : ctrl.keywordListFactory.keywords.loading }"><tr ng-repeat="row in ctrl.keywordListFactory.keywords.results"><td class="col-md-1 text-center"><st-select row="row"></st-select></td><td class="col-md-7">{{ row.keyword }}</td><td class="col-md-3 text-right">{{ row.volume | number }}</td><td class="col-md-1"></td></tr></tbody><tfoot><tr><td colspan="4" st-pagination="" st-displayed-pages="ctrl.keywordListFactory.keywords.numberOfPages" class="text-center"></td></tr></tfoot></table></div></div>')}]),angular.module("js/components/workArea/keyword/keywordList/pagination.jade",[]).run(["$templateCache",function(a){a.put("js/components/workArea/keyword/keywordList/pagination.jade",'<nav ng-if="pages.length &gt;= 2"><ul class="pagination"><li ng-repeat="page in pages" ng-class="{active: page===currentPage}" class="ng-scope"><a ng-click="selectPage(page)" class="ng-binding">{{ page }}</a></li></ul></nav>')}]),angular.module("js/components/workArea/keyword/keywordSearch/keywordSearch.jade",[]).run(["$templateCache",function(a){a.put("js/components/workArea/keyword/keywordSearch/keywordSearch.jade",'<div class="row"><div class="well col-md-12"><div class="col-md-6"><p><strong>Enter keywords here (one keyword per line)</strong></p><textarea rows="7" class="form-control"></textarea></div><div class="col-md-6"><p><strong>Settings for search</strong></p><p>Country: <kbd>{{ activeWorkarea.country }}</kbd></p><p>Month: <kbd>{{ searchMonth | date:\'MMM yyyy\'}}</kbd></p><div class="well well-sm col-md-12"><div class="col-md-6"><div class="radio"><label><input type="radio" name="radioTime" checked="checked">Exact keyword volumes only</label></div><div class="radio"><label><input type="radio" name="radioTime">Get keyword volumes with related words</label></div></div><div class="col-md-6"><div class="checkbox"><label><input type="checkbox" name="checkboxTime">Competition metrics</label></div></div></div></div><div class="col-md-12 text-right">This search will cost you <strong>12 credits</strong> &nbsp; <button class="btn btn-success">Search</button></div></div></div>')}]),angular.module("js/components/workArea/node/nodeArea/nodeArea.jade",[]).run(["$templateCache",function(a){a.put("js/components/workArea/node/nodeArea/nodeArea.jade",'<div ng-controller="nodeAreaController as ctrl" class="container-fluid node-container"><div class="row text-center parent-node-cont"><node-parent node="nodeParent" work-area="workArea" add-sub-item="ctrl.nodeAreaFactory.addNewTopNode(workArea.hash_id, subNodes, index);"></node-parent></div><div class="row"><span ng-repeat="node in subNodes"><div ng-class="node.length === 0 ? \'node-col-small\' : \'node-col\'"><div ng-if="node.length === 0" ng-mouseover="showAddButton = true" ng-mouseleave="showAddButton = false" class="add-sub-item-cont"><div ng-show="showAddButton" ng-click="ctrl.nodeAreaFactory.addNewTopNode(workArea.hash_id, subNodes, $index); $event.stopPropagation();" class="add-subitem">Add page</div></div></div></span></div><div class="row"><span ng-repeat="node in subNodes"><div ng-class="node.length === 0 ? \'node-col-small\' : \'node-col\'"><node-tree nodes="node" work-area="workArea"></node-tree></div></span></div></div>')}]),angular.module("js/components/workArea/node/nodeArea/nodeTree/nodeTreeItemView.jade",[]).run(["$templateCache",function(a){a.put("js/components/workArea/node/nodeArea/nodeTree/nodeTreeItemView.jade",'<div ng-show="node.lock" class="col-md-12 cloak"></div><div ng-click="setActiveNode(node)" ng-mouseover="ctrl.nodeTreeFactory.showEditButtons(true, node)" ng-mouseleave="ctrl.nodeTreeFactory.showEditButtons(false, node)" class="tree-node level-{{ this.depth() }}"><div ui-tree-handle="ui-tree-handle" ng-show="node.showEditButtons" class="pull-left tree-handle"><span class="fa fa-arrows"></span></div><div class="tree-node-content form-inline"><i data-nodrag="data-nodrag" ng-click="toggle(this); $event.stopPropagation();" ng-show="ctrl.nodeTreeFactory.haveChildren(node);" ng-class="{\'fa-toggle-right\': collapsed, \'fa-toggle-down\': !collapsed}" class="fa toggle"></i><modify-field field="node.name" on-save="patchNode(workArea, node, {\'name\': newVal})" on-blur="ctrl.nodeTreeFactory.showEditButtons(false, node);" class="edit-name"></modify-field><i data-nodrag="data-nodrag" ng-click="deleteNode(this, node); $event.stopPropagation();" ng-show="node.showEditButtons" class="fa fa-remove fa-border remove-item pull-right"></i><div ng-show="node.showEditButtons" ng-click="ctrl.nodeTreeFactory.addSubNode(node.id, node.name, node.children, workArea.hash_id);" class="add-subitem">Add subpage</div></div></div><ol ui-tree-nodes="ui-tree-nodes" ng-model="node.children" ng-class="{hidden: collapsed}"><li ng-repeat="node in node.children" ui-tree-node="ui-tree-node" ng-include="\'js/components/workArea/node/nodeArea/nodeTree/nodeTreeItemView.jade\'" ng-hide="node.hidden"></li></ol>')}]),angular.module("js/components/workArea/node/nodeArea/nodeTree/nodeTreeView.jade",[]).run(["$templateCache",function(a){a.put("js/components/workArea/node/nodeArea/nodeTree/nodeTreeView.jade",'<div ui-tree="treeOptions" data-empty-place-holder-enabled="false" ng-controller="nodeTreeController as ctrl"><ol ui-tree-nodes="ui-tree-nodes" ng-model="nodes" id="tree-root"><li ng-repeat="node in nodes" ui-tree-node="ui-tree-node" ng-include="\'js/components/workArea/node/nodeArea/nodeTree/nodeTreeItemView.jade\'"></li></ol></div>')}]),angular.module("js/components/workArea/node/nodeArea/parentNode/parentNode.jade",[]).run(["$templateCache",function(a){a.put("js/components/workArea/node/nodeArea/parentNode/parentNode.jade",'<div class="node-col"><div style="cursor:pointer" class="angular-ui-tree"><div ng-controller="nodeParentController as ctrl" class="angular-ui-tree-node level-1"><div ng-mouseover="ctrl.nodeTreeFactory.showEditButtons(true, node)" ng-mouseleave="ctrl.nodeTreeFactory.showEditButtons(false, node)" ng-click="setActiveNode(node)" class="tree-node-content form-inline"><div class="edit-name"><modify-field field="node.name" on-save="patchNode(workArea, node, {\'name\': newVal})" on-blur="ctrl.nodeTreeFactory.showEditButtons(false, node);" class="edit-name"></modify-field><div ng-show="node.showEditButtons" ng-click="addSubItem(); $event.stopPropagation();" class="add-subitem">Add subpage</div></div></div></div></div></div>')}]),angular.module("js/components/workArea/node/showNode/autoComplete.jade",[]).run(["$templateCache",function(a){a.put("js/components/workArea/node/showNode/autoComplete.jade",'<div ng-class="{\'angucomplete-dropdown-visible\': showDropdown}" class="angucomplete-holder"><input ng-model="searchStr" ng-disabled="disableInput" type="text" placeholder="{{placeholder}}" ng-focus="onFocusHandler(); resetHideResults()" ng-blur="hideResults($event)" autocapitalize="off" autocorrect="off" autocomplete="off" ng-change="inputChangeHandler(searchStr)" class="{{inputClass}}"><div ng-show="showDropdown" class="angucomplete-dropdown"><div ng-show="searching" ng-bind="textSearching" class="angucomplete-searching"></div><div ng-show="!searching &amp;&amp; (!results || results.length == 0)" ng-bind="textNoResults" class="angucomplete-searching"></div><div ng-repeat="result in results" ng-click="selectResult(result)" ng-mouseenter="hoverRow($index)" ng-class="{\'angucomplete-selected-row\': $index == currentIndex}" class="angucomplete-row"><div ng-if="matchClass" ng-bind-html="result.title" class="angucomplete-title"></div><div ng-if="!matchClass" class="angucomplete-title">{{ result.title }}</div><div ng-if="matchClass &amp;&amp; result.description &amp;&amp; result.description != \'\'" ng-bind-html="result.description" class="angucomplete-description"></div><div ng-if="!matchClass &amp;&amp; result.description &amp;&amp; result.description != \'\'" class="angucomplete-description">{{result.description}}</div></div><div ng-click="selectResult({title: searchStr, originalObject: { name: searchStr, custom: true }})" ng-mouseenter="hoverRow(results.length)" ng-class="{\'angucomplete-selected-row\': results.length == currentIndex}" class="angucomplete-row"><div class="angucomplete-title">Create new keyword <strong>{{ searchStr }}</strong></div></div></div></div>')}]),angular.module("js/components/workArea/node/showNode/showNodeView.jade",[]).run(["$templateCache",function(a){a.put("js/components/workArea/node/showNode/showNodeView.jade",'<div class="show-node-container col-md-12"><pageslide ps-open="showEditNode" ps-side="bottom" ps-class="showNodeSlide" ps-size="400px"><div class="heading col-md-12"><div class="row"><i ng-click="toggle()" ng-show="node" ng-class="{\'fa-angle-double-down\': showEditNode,\'fa-angle-double-up\': !showEditNode}" class="fa toggle-button"></i><div class="col-md-4"><span ng-show="node">{{ node.name }}</span><span ng-hide="node">Select a page</span></div><div class="col-md-8"><div class="metric-box pull-right"><div class="text">Total search volume</div><div class="metric label label-success">{{ ctrl.nodeHelper.sumSearchVolume(node) }}</div></div></div></div></div><div class="body-header col-md-12"><div class="row text-center"><h3>Keywords for the page <strong>{{ node.name }}</strong></h3></div></div><div class="body col-md-12"><div class="row"><div class="col-md-3"><div class="form-group"><angucomplete-alt id="keyword-field-$index" selected-object="addKeywordToNode" description="asd" placeholder="Enter keyword" pause="100" local-data="searchKeywords" search-fields="keyword" title-field="keyword" minlength="1" input-class="form-control" template-url="js/components/workArea/node/showNode/autoComplete.jade"></angucomplete-alt></div></div><div class="col-md-12"><table class="table table-hover"><tbody><tr ng-repeat="k in keywords"><td>{{ k.keyword }}</td><td>{{ k.volume }}</td><td>{{ k.type }}</td><td><i ng-click="removeKeyword($index)" class="fa fa-remove"></i></td></tr></tbody></table></div></div></div></pageslide></div>')}]),angular.module("js/components/workArea/popups/addKeywords/addKeywordsView.jade",[]).run(["$templateCache",function(a){a.put("js/components/workArea/popups/addKeywords/addKeywordsView.jade",'<div class="modal-header"><h4>Add multiple keywords</h4></div><div class="modal-body"><div class="form-group"><textarea rows="7" ng-model="keywordItems" class="form-control"></textarea></div></div><div class="modal-footer"><span class="pull-left"><b>Format:</b> Keyword name<br><small>(one item per line)</small></span> <button ng-click="add()" class="btn btn-primary">Add</button> <button ng-click="cancel()" class="btn btn-warning">Cancel</button></div>')}]),angular.module("js/components/workArea/popups/updateKeywords/updateKeywordsView.jade",[]).run(["$templateCache",function(a){a.put("js/components/workArea/popups/updateKeywords/updateKeywordsView.jade",'<div class="modal-header"><h2>Update search volumes<i ng-click="cancel()" class="fa fa-close pull-right">&nbsp;</i></h2></div><div ng-controller="creditController as ctrl" class="update-keywords"><div class="modal-body"><div class="row credits-bar text-center"><div class="col-md-2"></div><div class="col-md-4"><i class="fa fa-usd"></i>&nbsp; Credits to pay: &nbsp;<div class="label label-danger">{{ctrl.creditFactory.estimateCost(keywords.length)}}</div></div><div class="col-md-4"><i class="fa fa-credit-card"></i>&nbsp; Your current credits: &nbsp;<div ng-hide="ctrl.creditFactory.searchDisabled(keywords.length)" class="label label-primary">{{ctrl.creditFactory.units}}</div><div ng-show="ctrl.creditFactory.searchDisabled(keywords.length)" class="label label-warning">{{ctrl.creditFactory.units}}</div></div><div class="col-md-2"></div></div></div><div class="modal-body"><form name="keywordForm"><div class="row"><div class="col-md-12">What do you want updated?<div class="radio-buttons"><button ng-click="updateCurrentKeywords()" ng-class="{\'btn-primary\' : isCurrentUpdateChoice(\'current\')}" class="btn btn-default">Current keywords</button> <button ng-click="updateAllKeywords()" ng-class="{\'btn-primary\' : isCurrentUpdateChoice(\'all\')}" class="btn btn-default">All keywords</button></div></div></div><br><div class="row"><div class="col-md-12"><table class="table table-hover table-bordered"><thead><tr><th class="col-md-6">Keyword</th><th>Search volume (monthly)</th></tr></thead><tbody><tr ng-repeat="k in keywords | orderBy:\'keyword\'"><td>{{ k.keyword }}</td><td>{{ k.volume }}</td></tr></tbody></table></div></div></form></div></div><div ng-controller="creditController as ctrl" class="modal-footer"><a ui-sref="root.credits" ng-click="cancel()" class="btn btn-primary">Buy more credits</a> <button ng-click="updateKeywordVolume()" ng-disabled="ctrl.creditFactory.searchDisabled(keywords.length)" class="btn btn-success">Update keywords</button></div>')}]),angular.module("js/components/workArea/preview/preview.jade",[]).run(["$templateCache",function(a){a.put("js/components/workArea/preview/preview.jade",'<div class="col-md-8"><preview-page nodes="nodes"></preview-page></div><div class="col-md-4"><help-text help-section="helpSection"></help-text></div>')}]),angular.module("js/components/workArea/preview/previewHelp/previewHelp.jade",[]).run(["$templateCache",function(a){a.put("js/components/workArea/preview/previewHelp/previewHelp.jade",'<div class="col-md-12 preview"><div ng-switch="helpSection"><div ng-switch-when="heading"><h2>Rubriker</h2><ul><li>2-4 sekunder, kommer en besökare att se din rubrik</li><li>Kort, relevant och intresseväckande.</li><li>En rubrik måste fungera helt utanför sitt sammanhang</li><li>Överdriv inte, det kommer slå tillbaka, var ärlig</li></ul></div><div ng-switch-when="preamble"><h2>Ingress</h2><ul><li>200 - 300 tecken</li><li>Sammanfattning av vad sidan vill förmedla</li></ul></div><div ng-switch-when="caption"><h2>Underrubriker</h2><ul><li>Ange fördelarna med produkten / tjänsten</li><li>Ange de viktigaste sökorden tidigt</li></ul></div><div ng-switch-when="link"><h2>Länkar</h2><ul><li>Använd länkar för highlighta viktigaste sökord eller fördelar</li></ul></div><div ng-switch-when="bulletpoints"><h2>Punktlistor</h2><ul><li>Använd länkar för highlighta viktigaste sökord eller fördelar</li></ul></div><div ng-switch-when="bold"><h2>Fetstilt</h2><ul><li>Använd länkar för highlighta viktigaste sökord eller fördelar</li></ul></div></div></div>')}]),angular.module("js/components/workArea/preview/previewPage/previewPage.jade",[]).run(["$templateCache",function(a){a.put("js/components/workArea/preview/previewPage/previewPage.jade",'<div class="col-md-12 preview"><div class="col-md-4 logo">Logo</div><div class="col-md-8 info"><div class="pull-right text-right">This marks a&nbsp;<span class="primary-keyword">primary keyword</span><br>And this marks a&nbsp;<span class="secondary-keyword">secondary keyword</span></div></div><div class="col-md-12 navbar navbar-preview"><ul ng-repeat="node in nodes" class="nav navbar-nav"><li><a ng-click="setParent(node); setActiveNode(node);" ng-class="{ \'active\' : node.id === parentNode.id }">{{ node.name }}</a></li></ul></div><div class="col-md-4"><ul ng-model="childNodes" class="nav nav-pills nav-stacked"><li ng-repeat="node in childNodes" ng-include="\'js/components/workArea/preview/previewPage/previewPageItem.jade\'"></li></ul></div><div class="col-md-8"><preview-text node="activeNode"></preview-text></div></div>')}]),angular.module("js/components/workArea/preview/previewPage/previewPageItem.jade",[]).run(["$templateCache",function(a){a.put("js/components/workArea/preview/previewPage/previewPageItem.jade",'<a ng-click="setActiveNode(node)" ng-class="{ \'active\' : node === activeNode }">{{ node.name }}<i ng-click="toggle(node, node.children); $event.stopPropagation();" ng-show="node.children.length &gt; 0" ng-class="{\'fa-toggle-down\': node.active, \'fa-toggle-right\': !node.active}" class="fa pull-right"></i></a><ul ng-model="node.children" ng-show="node.active" class="nav nav-pills nav-stacked child-nav"><li ng-repeat="node in node.children" ng-include="\'js/components/workArea/preview/previewPage/previewPageItem.jade\'"></li></ul>')}]),angular.module("js/components/workArea/preview/previewText/previewQuestion.jade",[]).run(["$templateCache",function(a){a.put("js/components/workArea/preview/previewText/previewQuestion.jade",'<div ng-mouseover="previewAreaCtrl.showHelp()" ng-mouseleave="previewAreaCtrl.hideHelp()" class="col-md-2 text-right"><div ng-transclude="ng-transclude"></div></div>')}]),angular.module("js/components/workArea/preview/previewText/previewSection.jade",[]).run(["$templateCache",function(a){a.put("js/components/workArea/preview/previewText/previewSection.jade",'<div ng-style="previewAreaCtrl.textColor" class="col-md-10"><div ng-transclude="ng-transclude"></div></div>')}]),angular.module("js/components/workArea/preview/previewText/previewText.jade",[]).run(["$templateCache",function(a){a.put("js/components/workArea/preview/previewText/previewText.jade",'<div class="row"><preview-area><preview-section><h1 class="primary-keyword">{{ node.name }}</h1></preview-section><preview-question><h1><i ng-mouseover="previewCtrl.setHelpSection(\'heading\')" class="fa fa-question-circle"></i></h1></preview-question></preview-area></div><div class="row"><preview-area><preview-section><p><strong>Lorem ipsum dolor sit amet, consectetur adipiscing elit <span class="primary-keyword">{{ node.name | lowercase }}</span>&nbsp; etiam eget imperdiet augue. Praesent aliquet mi ut enim interdum, vitae accumsan quam iaculis volutpat.</strong></p></preview-section><preview-question><p><i ng-mouseover="previewCtrl.setHelpSection(\'preamble\')" class="fa fa-question-circle"></i></p></preview-question></preview-area></div><div class="row"><preview-area><preview-section><h3>Caption about <span class="primary-keyword">{{ node.name | lowercase }}</span></h3></preview-section><preview-question><h3><i ng-mouseover="previewCtrl.setHelpSection(\'caption\')" class="fa fa-question-circle"></i></h3></preview-question></preview-area></div><div class="row"><preview-area><preview-section><p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Etiam eget imperdiet augue. Praesent aliquet mi ut enim interdum, &nbsp;<a href="#">use links to highlight <span class="secondary-keyword">{{ node.name | lowercase }}</span></a>&nbsp; vitae accumsan quam iaculis volutpat.</p></preview-section><preview-question><p><i ng-mouseover="previewCtrl.setHelpSection(\'link\')" class="fa fa-question-circle"></i></p></preview-question></preview-area></div><div class="row"><preview-area><preview-section><p><ul><li><span class="secondary-keyword">{{ node.name | lowercase }}</span> is a category</li><li>Bullet lists are great for highlight keywords i.e. <span class="secondary-keyword">{{ node.name | lowercase }}</span></li><li>Some other random fact</li></ul></p></preview-section><preview-question><p><i ng-mouseover="previewCtrl.setHelpSection(\'bulletpoints\')" class="fa fa-question-circle"></i></p></preview-question></preview-area></div><div class="row"><div class="col-md-10"><h3>The <span class="secondary-keyword">{{ node.name | lowercase }}</span></h3></div></div><div class="row"><preview-area><preview-section><p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Etiam eget imperdiet augue. Praesent aliquet mi ut enim interdum, &nbsp;<strong>use bold to highlight <span class="secondary-keyword">{{ node.name | lowercase }}</span></strong>&nbsp; vitae accumsan quam iaculis volutpat.</p></preview-section><preview-question><p><i ng-mouseover="previewCtrl.setHelpSection(\'bold\')" class="fa fa-question-circle"></i></p></preview-question></preview-area></div>')}]),angular.module("js/components/workArea/settings/settingsView.jade",[]).run(["$templateCache",function(a){
a.put("js/components/workArea/settings/settingsView.jade",'<div class="row"><div ng-controller="settingsController as ctrl" class="col-md-12 workarea-settings"><form name="workAreaSettings"><div ng-show="ctrl.settingsFactory.showSettings()" class="col-md-6"><p>Name of workarea &nbsp;<i popover="Needs to enter a domain name i.e. http://example.se" popover-trigger="mouseenter" class="fa fa-question fa-border"></i> <input type="url" name="site_url" ng-model="ctrl.settingsFactory.workArea.site_url" ng-class="{ \'has-error\': ctrl.formFactory.fieldErrorOrRequired(workAreaSettings.site_url) }" required="required" class="form-control"></p><p>Search language &nbsp;<i popover="What language to do keyword searches on." popover-trigger="mouseenter" class="fa fa-question fa-border"></i><select name="country" ng-model="ctrl.settingsFactory.workArea.country" ng-class="{ \'has-error\': ctrl.formFactory.fieldErrorOrRequired(workAreaSettings.country) }" required="required" class="form-control"><option>GLOBAL</option><option>SE</option></select></p><p><button ng-click="ctrl.settingsFactory.saveWorkarea()" class="btn btn-primary">Save changes</button></p></div><div ng-hide="ctrl.settingsFactory.showSettings()" class="col-md-6"><h2>Please select a workarea</h2></div></form></div></div>')}]),angular.module("js/components/workArea/workAreaListView.jade",[]).run(["$templateCache",function(a){a.put("js/components/workArea/workAreaListView.jade",'<div class="container"><div class="row"><table ng-show="workareas.length &gt; 0" class="table table-striped"><thead><tr><th>Site URL</th><th><button style="float: right" ui-sref="root.workArea.navigation" class="btn btn-sm btn-success">Add new workarea</button></th></tr></thead><tbody><tr ng-repeat="wa in workareas" class="animate-repeat"><td><a ui-sref="root.workArea.navigation({workAreaId: wa.hash_id})">{{ wa.site_url }}</a></td><td class="col-md-2"><i ng-click="delete(wa, $index)" class="fa fa-remove"><span ng-show="wa.deleting">&nbsp; Deleting</span></i></td></tr></tbody></table></div><div ng-show="root.workareas.length &lt;= 0" class="row new-workarea"><button ui-sref="root.workArea.navigation" class="btn btn-primary">Create workarea</button></div></div>')}]),angular.module("js/components/workArea/workAreaView.jade",[]).run(["$templateCache",function(a){a.put("js/components/workArea/workAreaView.jade",'<div class="container-fluid navotron-content"><control-panel></control-panel></div><div class="container-fluid navotron-content"><ui-view></ui-view></div><show-node node="activeNode" ng-if="state.current.name !== \'root.workArea.keywords\'"></show-node>')}]),angular.module("js/main.jade",[]).run(["$templateCache",function(a){a.put("js/main.jade",'<div ui-view="header"></div><div ui-view="main"></div><div ui-view="footer"></div>')}]),angular.module("navotron.config",["navotron.notification"]).config(["$httpProvider","notificationProvider","oauth2Provider",function(a,b,c){a.defaults.cache=!1,b.setTimeout(8e3),c.setClientDetails({url:"/oauth2/token/",clientId:"qT.pfokMO=1X.j6Pz4jB4L-.P_S1O9abTiFoqPj9",clientSecret:"YeFV?UweZ6P!oeVFFIPN5NkicXB8tHFh@PC0ACZF@htyF4gxcb8iDd?VC2;E3bpkP_.ApQob!JtwolA0FJDc-DBzAHDZ8?dnmCMsMc1qTM8TcB!0C!.q?TYjpswEo2MX"})}]),angular.module("navotron.constants",[]).constant("AUTH_EVENTS",{loginSuccess:"auth-login-success",loginFailed:"auth-login-failed",logoutSuccess:"auth-logout-success",sessionTimeout:"auth-session-timeout",notAuthenticated:"auth-not-authenticated",notAuthorized:"auth-not-authorized"}).constant("USER_ROLES",{all:"*",admin:"admin",editor:"editor"}),angular.module("navotron",["navotron.api","navotron.authService","navotron.broadcastInterceptor","navotron.config","navotron.run","navotron.constants","navotron.credits","navotron.datadef","navotron.directives","navotron.login","navotron.navbar","navotron.notification","navotron.resolver","navotron.routes","navotron.session","navotron.workAreaSettings","navotron.templates","navotron.workArea","navotron.workAreaList","angular-extend-promises","ngAnimate","ui.router","ui.bootstrap"]),angular.module("navotron.routes",["ui.router"]).config(["$stateProvider","$urlRouterProvider","USER_ROLES",function(a,b,c){b.otherwise("/"),a.state("root",{url:"/",views:{"@":{templateUrl:"js/main.jade"},"header@root":{template:"<navbar></navbar>"},"main@root":{template:"<work-area-list></work-area-list>"},"footer@root":{template:""}},data:{authorizedRoles:[c.editor]}}).state("root.workAreaSettings",{url:"settings",views:{"main@root":{template:"<work-area-settings></work-area-settings>"}}}).state("root.login",{url:"login",views:{"main@root":{template:'<login username="currentUser" is-authenticated="isAuthenticated"></login>'}},data:{authorizedRoles:[]}}).state("root.settings",{url:"user/settings",views:{"main@root":{template:"<settings></settings>"}}}).state("root.credits",{url:"credits",views:{"main@root":{template:"<credits></credits>"}}}).state("root.workArea",{url:"workarea/:workAreaId",views:{"main@root":{template:"<work-area></work-area>"}},resolve:{currentWorkArea:["workAreaResolver","$stateParams",function(a,b){return a(b.workAreaId)}],currentNodes:["nodeResolver","$stateParams",function(a,b){return a(b.workAreaId)}]},"abstract":!0}).state("root.workArea.navigation",{url:"/",views:{"@root.workArea":{template:'<node-area nodes="nodes" work-area="workArea"></node-area>',controller:["$scope","currentWorkArea","currentNodes",function(a,b,c){a.workArea=b,a.nodes=c}]}}}).state("root.workArea.preview",{url:"/preview",views:{"@root.workArea":{template:'<preview nodes="nodes"></preview>',controller:["$scope","currentWorkArea","currentNodes",function(a,b,c){a.workArea=b,a.nodes=c}]}}}).state("root.workArea.keywords",{url:"/keywords",views:{"@root.workArea":{template:"<keyword></keyword>"}}})}]),angular.module("navotron.run",["navotron.api","navotron.constants","navotron.notification"]).run(["$rootScope","$state","notification","api","AUTH_EVENTS",function(a,b,c,d,e){a.$on(e.loginSuccess,function(a,c){b.go("root",{},{reload:!0})}),a.$on(e.logoutSuccess,function(a,c){b.go("root.login",{},{reload:!0})}),a.$on(e.sessionTimeout,function(a,c){d.users.logoutUser(),b.go("root.login",{},{reload:!0})}),a.$on(e.notAuthorized,function(a,d){c.info("You do not have privilages to access that view."),b.go("root.login",{},{reload:!0})}),a.$on(e.notAuthenticated,function(a,c){d.users.logoutUser(),b.go("root.login")}),a.$on("$stateChangeStart",function(b,c){var f=c.data.authorizedRoles;d.users.isAuthorized(f)||(b.preventDefault(),d.users.isAuthenticated()?a.$broadcast(e.notAuthorized,{}):a.$broadcast(e.notAuthenticated,{}))})}]),angular.module("navotron.api",["navotron.apiKeywords","navotron.apiNodes","navotron.apiUsers","navotron.apiWorkArea","navotron.apiCredits"]).factory("api",["workareas","nodes","users","keywords","credits",function(a,b,c,d,e){return{workareas:a,nodes:b,users:c,keywords:d,credits:e}}]),angular.module("navotron.authService",["navotron.authOauth2"]).factory("authService",["oauth2","tokens",function(a,b){return{logoutUser:function(){b.destroy(),b.load()},loginUser:function(b,c){return a.login(b,c)},isAuthenticated:function(){return!!b.accessToken}}}]),angular.module("navotron.authOauth2",["LocalStorageModule"]).provider("oauth2",function(){function a(a){var b=[];for(var c in a)b.push(encodeURIComponent(c)+"="+encodeURIComponent(a[c]));return b.join("&")}var b,c,d;this.setClientDetails=function(a){d=a.url,b=a.clientId,c=a.clientSecret},this.$get=["$http","tokens",function(e,f){function g(b){return e({method:"POST",url:d,headers:{"Content-Type":"application/x-www-form-urlencoded"},data:a(b)}).then(function(a){return f.create(a.data.access_token,a.data.refresh_token,a.data.expires_in),a})}return{login:function(a,d){return g({grant_type:"password",client_id:b,client_secret:c,username:a,password:d})},refresh:function(){var a=f.refreshToken;return f.destroy(),g({grant_type:"refresh_token",client_id:b,client_secret:c,refresh_token:a})},refreshRequired:function(){return f.accessToken?f.expiryDate<=Math.floor(Date.now()/1e3):!1}}}]}).service("tokens",["localStorageService",function(a){this.load=function(){this.accessToken=a.get("accessToken"),this.refreshToken=a.get("refreshToken"),this.expiryDate=a.get("expiryDate")},this.create=function(b,c,d){var e=Math.floor(Date.now()/1e3)+d;a.set("accessToken",b),a.set("refreshToken",c),a.set("expiryDate",e),this.load()},this.destroy=function(){a.remove("accessToken"),a.remove("refreshToken"),a.remove("expiryDate"),this.load()},this.load()}]).factory("tokenInterceptor",["$injector","tokens",function(a,b){return{request:function(c){if(null!==b.accessToken&&angular.extend(c.headers,{Authorization:"Bearer "+b.accessToken}),"/oauth2/token/"!==c.url){var d=a.get("oauth2");if(d.refreshRequired())return d.refresh().then(function(){return c})}return c}}}]).config(["$httpProvider",function(a){a.interceptors.push("tokenInterceptor")}]),angular.module("navotron.apiCredits",[]).factory("credits",["$http",function(a){return{get:function(b){return a.get(Urls.credit_list()).then(function(a){return a.data})},postCreditOrder:function(b){return a.post(Urls.creditorder_list(),{units:b}).then(function(a){return a.data})},deleteCreditOrder:function(b){return a["delete"](Urls.creditorder_detail(b))}}}]),angular.module("navotron.apiKeywords",["navotron.credits","navotron.pagination"]).factory("keywords",["$http","buildQueryParams","creditFactory","stPagination",function(a,b,c,d){return{get:function(c,d){return a.get(Urls.workarea_keywords_list(c)+b(d)).then(function(a){return a.data})},getPaginated:function(a){return d(Urls.workarea_keywords_list(a))},patch:function(b,c,d){return a.patch(Urls.workarea_keywords_detail(b,c),d).then(function(a){return a.data})},post:function(b,c){return a.post(Urls.workarea_keywords_list(b),c).then(function(a){return a.data})},postBulk:function(b,c){return a.post(Urls.workarea_keywords_bulk_create(b),c).then(function(a){return a.data})},"delete":function(b,c){return a["delete"](Urls.workarea_keywords_detail(b,c))},deleteBulk:function(b,c){return a["delete"](Urls.workarea_keywords_bulk(b),{data:angular.toJson(c),headers:{"Content-Type":"application/json"}})},updateVolume:function(b){return a.post(Urls.workarea_update_keywords(b)).then(function(a){return c.updateUnits().then(function(){return a})})}}}]).factory("buildQueryParams",function(){function a(a,c,d){for(var e=b(a),f=0;f<e.length;f++)c.call(d,a[e[f]],e[f]);return e}function b(a){var b=[];for(var c in a)a.hasOwnProperty(c)&&b.push(c);return b.sort()}function c(b){var c=[];return a(b,function(a,b){null!==a&&void 0!==a&&(angular.isObject(a)&&(a=angular.toJson(a)),c.push(encodeURIComponent(b)+"="+encodeURIComponent(a)))}),"?"+c.join("&")}return c}),angular.module("navotron.apiNodes",["navotron.cache"]).factory("nodes",["$http","cache",function(a,b){return{getNested:function(c){return a.get(Urls.workarea_nodes_nested_list(c),{cache:b.get()}).then(function(a){return a.data})},postNested:function(c,d){return b.destroy(),a.post(Urls.workarea_nodes_nested_create(c),d).then(function(a){return a.data})},patch:function(c,d,e){return b.destroy(),a.patch(Urls.workarea_nodes_detail(c,d),e).then(function(a){return a.data})},patchBulk:function(c,d){return b.destroy(),a.patch(Urls.workarea_nodes_bulk_update(c),d).then(function(a){return a.data})},post:function(c,d){return b.destroy(),a.post(Urls.workarea_nodes_list(c),d).then(function(a){return a.data})},"delete":function(c,d){return b.destroy(),a["delete"](Urls.workarea_nodes_detail(c,d))}}}]),angular.module("navotron.apiUsers",["navotron.authService","navotron.constants","navotron.session"]).factory("users",["$http","$rootScope","authService","session","AUTH_EVENTS",function(a,b,c,d,e){return{getCurrentUser:function(){return a.get(Urls.user_current_user()).then(function(a){return a.data})},loginUser:function(a,f){var g=this;c.loginUser(a,f).then(function(a){g.getCurrentUser().then(function(a){d.set("user",a),b.$broadcast(e.loginSuccess)})})},logoutUser:function(){c.logoutUser(),d.destroy(),d.load(),b.$broadcast(e.logoutSuccess)},getUsername:function(){return null!==d.user?d.user.username:void 0},getUserGroup:function(){return null!==d.user?d.user.groups[0]:void 0},isAuthorized:function(a){return a.length<1?!0:-1!==a.indexOf(this.getUserGroup())},isAuthenticated:c.isAuthenticated}}]),angular.module("navotron.apiWorkArea",["navotron.cache"]).factory("workareas",["$http","cache",function(a,b){return{post:function(c){return b.destroy(),a.post(Urls.workarea_list(),c).then(function(a){return a.data})},patch:function(c,d){return b.destroy(),a.patch(Urls.workarea_detail(c),d).then(function(a){return a.data})},put:function(c,d){return b.destroy(),a.put(Urls.workarea_detail(c),d).then(function(a){return a.data})},"delete":function(c){return b.destroy(),a["delete"](Urls.workarea_detail(c))},get:function(){return a.get(Urls.workarea_list(),{cache:b.get()}).then(function(a){return a.data})},getOne:function(c){return a.get(Urls.workarea_detail(c),{cache:b.get()}).then(function(a){return a.data})}}}]),angular.module("navotron.credits",["navotron.apiCredits"]).service("creditFactory",["credits","$http","$timeout",function(a,b,c){var d=this;d.units=0,d.lastOrder=void 0;var e=null;d.updateUnits=function(){return a.get().then(function(a){return d.units=a.units,d.units})},d.orderCredits=function(b){return d.errorMessage="",a.postCreditOrder(b).then(function(a){d.lastOrder=a,c.cancel(e),e=c(function(){d.lastOrder=void 0},6e4)})["catch"](function(a){d.lastOrder=void 0,d.errorMessage=a.data.detail})},d.undoOrder=function(){return void 0!==d.lastOrder?a.deleteCreditOrder(d.lastOrder.id).then(function(a){d.lastOrder=void 0}):void 0},d.estimateCost=function(a){return 10*Math.ceil(a/100)},d.searchDisabled=function(a){return d.units<d.estimateCost(a)}}]).controller("creditController",["creditFactory",function(a){this.creditFactory=a,this.creditFactory.updateUnits()}]).directive("credits",function(){return{restrict:"E",templateUrl:"js/components/credits/credits.jade"}}).directive("creditPackage",function(){return{restrict:"E",scope:{title:"@",price:"@",units:"@"},templateUrl:"js/components/credits/creditPackage.jade",controller:["$scope","creditFactory",function(a,b){a.buy=function(){b.orderCredits(parseInt(a.units,10))}}]}}),angular.module("navotron.login",["navotron.api"]).directive("login",["api",function(a){return{restrict:"E",templateUrl:"js/components/login/loginView.jade",scope:{},controller:["$scope",function(b){b.users=a.users}]}}]),angular.module("navotron.controlBox",["navotron.api","navotron.popupBox"]).directive("controlBox",["api","workAreaHelper",function(a,b){return{restrict:"E",templateUrl:"js/components/navbar/controlBox/controlBoxView.jade",repalce:!0,controller:["$scope",function(c){c.users=a.users,c.getActiveWorkArea=b.getActiveWorkarea,c.$on("popupBox.open",function(b,d){a.workareas.get().then(function(a){c.workareas=a})})}]}}]),angular.module("navotron.navbar",["navotron.api","navotron.controlBox","navotron.credits"]).controller("navbarController",["$state","api","workAreaHelper","creditFactory",function(a,b,c,d){this.users=b.users,this.includes=a.includes,this.workAreaHelper=c,this.creditFactory=d,this.creditFactory.updateUnits()}]).directive("navbar",function(){return{restrict:"E",templateUrl:"js/components/navbar/navbar.jade"}}),angular.module("navotron.popupBox",[]).directive("popupBox",["$document",function(a){return{restrict:"EA",scope:{},link:function(b,c,d){var e=function(a){var d=$(c).find(a.target).length>0,e=c[0]===a.target,f=d||e;f||b.$apply(function(){b.close()})};a.on("click",e),c.on("$destroy",function(){a.off("click",e)})},controller:["$scope",function(a){a.show=!1,this.open=function(){a.show=!a.show,a.$emit("popupBox.open")},a.close=function(){a.show=!1},this.isOpen=function(){return a.show},a.$on("$stateChangeStart",function(b,c){a.close()})}]}}]).directive("pbButton",function(){return{restrict:"E",scope:{},transclude:!0,templateUrl:"js/components/navbar/popupBox/pbButton.jade",require:"^popupBox",link:function(a,b,c,d){a.popupBox=d}}}).directive("pbPanel",function(){return{restrict:"E",scope:{},transclude:!0,templateUrl:"js/components/navbar/popupBox/pbPanel.jade",require:"^popupBox",link:function(a,b,c,d){a.popupBox=d}}}),angular.module("navotron.broadcastInterceptor",["navotron.constants"]).factory("broadcastInterceptor",["$rootScope","$q","AUTH_EVENTS",function(a,b,c){return{responseError:function(d){return a.$broadcast({401:c.notAuthenticated,403:c.notAuthorized,419:c.sessionTimeout,440:c.sessionTimeout}[d.status],d),b.reject(d)}}}]).config(["$httpProvider",function(a){a.interceptors.push("broadcastInterceptor")}]),angular.module("navotron.cache",[]).service("cache",["$cacheFactory","session",function(a,b){this.get=function(){return void 0===a.get(b.user.id)?a(b.user.id):a.get(b.user.id)},this.destroy=function(){a.get(b.user.id).removeAll()}}]),angular.module("navotron.directives",[]).directive("toSelect",["$timeout",function(a){return function(b,c,d){b.$watch(d.toSelect,function(b){b&&a(function(){c[0].select()},0,!1)})}}]).directive("onBlur",["$parse",function(a){return function(b,c,d){var e=a(d.onBlur);c.bind("blur",function(a){b.$apply(function(){e(b,{$event:a})})})}}]).directive("onEnterPress",function(){return function(a,b,c){b.bind("keydown keypress",function(b){13===b.which&&(a.$apply(function(){a.$eval(c.onEnterPress,{event:b})}),b.preventDefault())})}}).directive("onEscPress",function(){return function(a,b,c){b.bind("keydown keypress",function(b){27===b.which&&(a.$apply(function(){a.$eval(c.onEscPress,{event:b})}),b.preventDefault())})}}),angular.module("navotron.modifyField",[]).directive("modifyField",["$timeout","$animate","modifyFieldFactory",function(a,b,c){return{restrict:"E",transclude:!1,scope:{field:"=",type:"=",onSave:"&",onBlur:"&"},templateUrl:"js/components/utils/modifyField/modifyFieldView.jade",link:function(a,c,d){b.enabled(!1,c)},controller:["$scope",function(a){a.editField=!1,a.edit=function(){a.newValue=a.field,a.editField=!0},a.save=function(){if(c.isNewValue(a.newValue,a.field)){var b=c.save(a.newValue,a.field,a.onSave);b.then(function(b){a.field=a.newValue})}a.editField=!1}}]}}]).service("modifyFieldFactory",function(){var a=this;a.save=function(a,b,c){return c({newVal:a,oldVal:b})},a.isNewValue=function(a,b){return angular.equals(a,b)?!1:a===b?!1:!0}}),angular.module("navotron.notification",[]).directive("ntNotification",["notification",function(a){return{restrict:"E",scope:{},templateUrl:"js/components/utils/notification/notification.jade",link:function(b,c,d){b.messages=a.messages}}}]).provider("notification",function(){var a=[],b=5e3;this.setTimeout=function(a){b=a},this.$get=["$timeout",function(c){function d(d,e){a.push({message:d,alertClass:e}),c(function(){a.shift()},b)}return{info:function(a){d(a,"alert-info")},success:function(a){d(a,"alert-success")},error:function(a,b){d(a+" Status: "+b.status+" ErrorMsg: "+b.statusText,"alert-danger")},messages:a}}]});var Pagination=function(){function a(a,b){var c=this;this.refresh=function(){return c._get(c.params)},this.setParam=function(a,b){c.params[a]=b},this.unsetParam=function(a){delete c.params[a]},this._get=function(a){return c.loading=!0,c.$http({method:"GET",url:c.baseUrl,params:a}).then(c._success)},this._success=function(a){return c.loading=!1,c.response=a,c.results=c.response.data.results,a},this.$http=a,this.response=null,this.params={},this.baseUrl=b,this.loading=!1,this.results=[]}return a}(),__extends=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);c.prototype=b.prototype,a.prototype=new c},stPagination=function(a){function b(b,c){var d=this;a.call(this,b,c),this.callServer=function(a){d.tableState=a,d.setOffsetParams(),d.setOrderingParams(),d.setSearchParams(),d.refresh().then(function(){d.tableState.pagination.numberOfPages=d.numberOfPages})},this.setOffsetParams=function(){d.setParam("limit",d.tableState.pagination.number||10),d.setParam("offset",d.tableState.pagination.start||0)},this.setOrderingParams=function(){var a=d.tableState.sort;if(void 0!==a.predicate){var b=a.reverse?"-":"";d.setParam("ordering",b+a.predicate)}else d.unsetParam("ordering")},this.setSearchParams=function(){var a=d.tableState.search.predicateObject;void 0!==a?d.setParam("search",a.search):d.unsetParam("search")},this.setParam("limit",10)}return __extends(b,a),Object.defineProperty(b.prototype,"numberOfPages",{get:function(){return null===this.response?0:null===this.tableState?0:Math.ceil(this.response.data.count/this.tableState.pagination.number)},enumerable:!0,configurable:!0}),b}(Pagination);angular.module("navotron.pagination",[]).factory("stPagination",["$http",function(a){return function(b){return new stPagination(a,b)}}]),angular.module("navotron.session",["LocalStorageModule"]).service("session",["localStorageService",function(a){this.load=function(){this.user=a.get("user"),this.activeNode=a.get("activeNode"),this.activeWorkArea=a.get("activeWorkArea")},this.set=function(b,c){a.set(b,c),this.load()},this.destroy=function(){a.remove("user"),this.activeNode=a.get("activeNode"),a.remove("activeWorkArea")},this.hasSetProperty=function(b){return null===a.get(b)?!1:!0},this.load()}]),angular.module("navotron.controlPanel",["navotron.workArea"]).directive("controlPanel",["workAreaEvent","session","workAreaHelper",function(a,b,c){return{restrict:"E",scope:{},link:function(d){d.editing=a.editing,d.workArea=b.activeWorkArea,d.patchWorkArea=function(a,b){return c.patchWorkarea(a.hash_id,b).then(function(a){c.setActiveWorkarea(a)})}},templateUrl:"js/components/workArea/controlPanel/controlPanelView.jade"}}]),angular.module("navotron.keywords",["navotron.keywordList","navotron.keywordSearch"]).directive("keyword",["workAreaHelper",function(a){return{restrict:"E",templateUrl:"js/components/workArea/keyword/keyword.jade",scope:{},link:function(b,c,d){b.activeWorkarea=a.getActiveWorkarea()}}}]),angular.module("navotron.keywordList",["navotron.api","smart-table"]).config(["stConfig",function(a){a.pagination.template="js/components/workArea/keyword/keywordList/pagination.jade",a.pagination.itemsByPage=10,a.pagination.displayedPages=0}]).controller("keywordListController",["keywordListFactory",function(a){this.keywordListFactory=a,this.keywordListFactory.init()}]).directive("keywordList",function(){return{restrict:"E",scope:{},templateUrl:"js/components/workArea/keyword/keywordList/keywordListView.jade"}}).service("keywordListFactory",["$modal","$stateParams","$state","api",function(a,b,c,d){var e=this;e.keywords={results:[]},e.init=function(){e.keywords=d.keywords.getPaginated(b.workAreaId)},e.removeKeywords=function(){var a=[];e.keywords.results.forEach(function(a){a.isSelected&&this.push(a.id)},a),d.keywords.deleteBulk(b.workAreaId,a)["finally"](function(a){c.go("root.workArea.keywords",{},{reload:!0})})},e.addKeywords=function(){e.modalInstance=a.open({templateUrl:"js/components/workArea/popups/addKeywords/addKeywordsView.jade",controller:"addKeywords",resolve:{workAreaId:function(){return b.workAreaId},nodeId:function(){return[]}}}),e.modalInstance.result.then(function(a){c.go("root.workArea.keywords",{},{reload:!0})})}}]).directive("stSelect",function(){return{require:"^stTable",template:'<input type="checkbox" ng-checked="row.isSelected" />',scope:{row:"="},link:function(a,b,c,d){b.bind("change",function(b){a.$apply(function(){a.row.isSelected?a.row.isSelected=!1:a.row.isSelected=!0})}),a.$watch("row.isSelected",function(a,c){a===!0?b.parent().parent().addClass("st-selected"):b.parent().parent().removeClass("st-selected")})}}}).directive("stSelectAll",function(){return{restrict:"E",template:'<input type="checkbox" ng-model="isAllSelected" />',scope:{all:"="},link:function(a,b,c){a.$watch("isAllSelected",function(){a.all.forEach(function(b){b.isSelected=a.isAllSelected})}),a.$watch("all",function(b,c){c&&c.forEach(function(a){a.isSelected=!1}),a.isAllSelected=!1})}}}),angular.module("navotron.keywordSearch",[]).directive("keywordSearch",function(){return{restrict:"E",templateUrl:"js/components/workArea/keyword/keywordSearch/keywordSearch.jade",scope:{activeWorkarea:"="},link:function(a){a.searchMonth=new Date}}}),angular.module("navotron.keyword",["navotron.api"]).service("keywordHelper",["workAreaEvent","api","notification",function(a,b,c){this.patchKeyword=function(d,e,f){return a.wrap(b.keywords.patch(d,e,f)).then(function(a){return!0})["catch"](function(a){return c.error("Could not update the keyword.",a),!1})},this.newKeyword=function(a){return{keyword:a.keyword,adult:"undefined"!=typeof a.adult?a.adult:"UNKNOWN",nodes:"undefined"!=typeof a.nodes?a.nodes:[],timestamp:"undefined"!=typeof a.timestamp?a.timestamp:null,type:"undefined"!=typeof a.type?a.type:"UNKNOWN",volume:"undefined"!=typeof a.volume?a.volume:0,workarea:"undefined"!=typeof a.workarea?a.workarea:"UNKNOWN"}}}]),angular.module("navotron.nodeArea",["navotron.nodeTree","navotron.nodeParent"]).controller("nodeAreaController",["$scope","nodeAreaFactory",function(a,b){this.nodeAreaFactory=b}]).directive("nodeArea",["nodeAreaFactory","nodeHelper","api","session",function(a,b,c,d){return{restrict:"E",templateUrl:"js/components/workArea/node/nodeArea/nodeArea.jade",scope:{nodes:"=",workArea:"="},controller:["$scope",function(b){this.updateIndexes=function(){a.updateIndexes(b.workArea.hash_id,b.subNodes)}}],link:function(b){b.nodeParent=b.nodes.slice(0,1)[0],b.subNodes=a.splitNodes(b.nodes.slice(1,b.nodes.length)),b.$watch("subNodes",function(c,d){b.subNodes=a.addEmptyNodeLists(c)},!0)}}}]).service("nodeAreaFactory",["api","workAreaEvent","nodeHelper",function(a,b,c){this.splitNodes=function(a){var b=[],c=[];return angular.forEach(a,function(a){c[a.id]=[a],this.push(c[a.id])},b),b},this.collapseNodes=function(a){var b=[];return angular.forEach(a,function(a){b.push.apply(b,a)}),b},this.addEmptyNodeLists=function(a){var b=[];return angular.forEach(a,function(a){a.length>0&&(this.push([]),this.push(a))},b),b.push([]),b},this.addNewTopNode=function(d,e,f){var g=this,h="undefined"!=typeof f?f+1:e.length,i={name:"New page",parentNode:null,lock:!0,index:h,workarea:d},j=c.newNode(i);b.wrap(a.nodes.post(d,j)).then(function(a){e.splice(h,0,[a]),g.updateIndexes(d,e)})},this.updateIndexes=function(d,e){var f=1,g=[];angular.forEach(this.collapseNodes(e),function(a){a.index=f,f+=1,this.push(a)},g);var h=c.getMovingNodes(g,null);b.wrap(a.nodes.patchBulk(d,h))}}]),angular.module("navotron.nodeTree",["navotron.api","navotron.modifyField","navotron.nodeHelper","navotron.workArea","ui.tree"]).controller("nodeTreeController",["nodeHelper","nodeTreeFactory","nodeTreeEvent",function(a,b,c){this.nodeHelper=a,this.nodeTreeFactory=b,this.nodeTreeEvent=c}]).directive("nodeTree",["nodeHelper","nodeTreeEvent",function(a,b){return{restrict:"E",transclude:!0,require:["^nodeArea","^workArea"],templateUrl:"js/components/workArea/node/nodeArea/nodeTree/nodeTreeView.jade",scope:{nodes:"=",workArea:"="},link:function(c,d,e,f){var g=f[0],h=f[1];c.setActiveNode=function(a){h.updateActiveNode(a)},c.patchNode=function(b,d,e){return a.patchNode(b.hash_id,d.id,e).then(function(a){c.setActiveNode(a)})},c.deleteNode=function(b,d){c.setActiveNode(!1),a.deleteNodeFromDatabase(b,a.hideNode(d))},c.treeOptions={dropped:function(b){if(a.changedPosition(b.source,b.dest)){var d=b.source.nodeScope.node,e=b.dest.nodesScope.$modelValue,f=a.getParentNode(b.dest.nodesScope.node);null===f?g.updateIndexes():a.updateIndexes(c.workArea.hash_id,a.getMovingNodes(e,f),d,e)}},accept:function(a,b,c){return b.depth()>0||b.nodes.length<=0},dragStart:function(){b.start()},dragStop:function(){b.stop()},dragMove:function(a){var b=angular.element(a.dest.nodesScope.$element[0].getElementsByClassName("angular-ui-tree-placeholder"));b.html("Move page(s) here.")}}}}}]).service("nodeTreeFactory",["nodeTreeEvent","nodeHelper","workAreaEvent","api","notification",function(a,b,c,d,e){this.haveChildren=function(a){return a.children.length>0},this.showEditButtons=function(b,c){a.editing()&&b||(c.showEditButtons=b)},this.addSubNode=function(a,f,g,h){var i={name:f+"."+(g.length+1),parentNode:a,lock:!0,index:g.length,workarea:h},j=b.newNode(i);return g.push(j),c.wrap(d.nodes.post(h,j)).then(function(a){return g[g.length-1]=a,a})["catch"](function(a){return g.splice(g.length-1,1),e.error("Could not create node",a),a})}}]),angular.module("navotron.nodeParent",[]).controller("nodeParentController",["nodeTreeFactory",function(a){this.nodeTreeFactory=a}]).directive("nodeParent",["nodeHelper",function(a){return{restrict:"E",require:"^workArea",templateUrl:"js/components/workArea/node/nodeArea/parentNode/parentNode.jade",scope:{node:"=",workArea:"=",addSubItem:"&"},link:function(b,c,d,e){b.setActiveNode=function(b){a.setActiveNode(b),e.updateActiveNode()},b.patchNode=function(c,d,e){return a.patchNode(c.hash_id,d.id,e).then(function(a){b.setActiveNode(a)})}}}}]),angular.module("navotron.nodeHelper",["navotron.workArea","navotron.api","navotron.notification"]).factory("nodeTreeEvent",["$rootScope",function(a){var b=!1;return a.$on("nodetree.edit.start",function(){b=!0}),a.$on("nodetree.edit.stop",function(){b=!1}),{start:function(){a.$emit("nodetree.edit.start")},stop:function(){a.$emit("nodetree.edit.stop")},wrap:function(b){return a.$emit("nodetree.edit.start"),b["finally"](function(){a.$emit("nodetree.edit.stop")}),b},editing:function(){return b}}}]).service("nodeHelper",["api","notification","workAreaEvent","nodeTreeEvent","session",function(a,b,c,d,e){this.getActiveNode=function(){return e.load(),e.activeNode},this.setActiveNode=function(a){return e.set("activeNode",a),a},this.hideNode=function(a){return a.hidden=!0,a},this.deleteNodeFromDatabase=function(d,e){c.wrap(a.nodes["delete"](e.workarea,e.id)).then(function(a){return d.remove(),!0})["catch"](function(a){return b.error("Could not remove node",a),e.hidden=!1,!1})},this.newNode=function(a){return{name:a.name,parentNode:"undefined"!=typeof a.parentNode?a.parentNode:null,children:"undefined"!=typeof a.children?a.children:[],keywords:"undefined"!=typeof a.keywords?a.keywords:[],lock:"undefined"!=typeof a.lock?a.lock:!1,index:"undefined"!=typeof a.index?a.index:0,workarea:"undefined"!=typeof a.workarea?a.workarea:null}},this.changedPosition=function(a,b){return a.nodesScope.$id!==b.nodesScope.$id||a.index!==b.index},this.getParentNode=function(a){return void 0===a?null:a.id},this.getMovingNodes=function(a,b){var c=[],d=1;return angular.forEach(a,function(a){this.push({id:a.id,index:d,parentNode:b}),d+=1},c),c},this.lockNode=function(a,b){return angular.forEach(a,function(a){a.lock=b}),a},this.updateIndexes=function(d,e,f,g){var h=this.lockNode;h(g,!0),c.wrap(a.nodes.patchBulk(d,e)).then(function(a){h(g,!1),f.parentNode=a.parentNode})["catch"](function(a){h(g,!1),b.error("Could not move workarea",a)})},this.patchNode=function(d,e,f){return c.wrap(a.nodes.patch(d,e,f)).then(function(a){return a})["catch"](function(a){return b.error("Could not update the node.",a),a})},this.sumSearchVolume=function(a){var b=0;if(a){var c=a.keywords;angular.forEach(c,function(a){b+=a.volume})}return b}}]),angular.module("navotron.showNode",["angucomplete-alt","navotron.api","navotron.keyword","navotron.modifyField","navotron.nodeHelper","pageslide-directive","ui.bootstrap"]).directive("showNode",["nodeHelper","showNodeFactory","keywordHelper",function(a,b,c){return{restrict:"E",scope:{node:"="},templateUrl:"js/components/workArea/node/showNode/showNodeView.jade",link:function(a){a.showEditNode=!1,a.$watch("node",function(c,d){void 0!==c&&(a.keywords=[],b.getKeywords({nodes:a.node.id}).then(function(b){a.keywords=b}))}),a.updateSearchKeywords=function(){b.getKeywords({}).then(function(b){a.searchKeywords=b})},a.toggle=function(){a.showEditNode=!a.showEditNode},a.addKeywordToNode=function(c){void 0!==c&&function(){if("id"in c.originalObject){var d=[c.originalObject].concat(a.keywords);return b.updateNode(a.node,d)}return b.createKeyword(a.node,c.originalObject.name);
}().then(function(b){a.keywords=b,a.$broadcast("angucomplete-alt:clearInput"),a.updateSearchKeywords()})},a.removeKeyword=function(c){var d=angular.copy(a.keywords);d.splice(c,1),b.updateNode(a.node,d).then(function(b){a.keywords=b})},a.updateSearchKeywords()}}}]).service("showNodeFactory",["$modal","$stateParams","workAreaEvent","api","keywordHelper",function(a,b,c,d,e){var f=this;f.convertList=function(a,b){var c=[];return angular.forEach(a,function(a){this.push(a[b])},c),c},f.createKeyword=function(a,g){var h=e.newKeyword({keyword:g,workarea:b.workAreaId,type:"SECONDARY",nodes:[a.id]});return c.wrap(d.keywords.post(b.workAreaId,h)).then(function(b){return f.getKeywords({nodes:a.id})})},f.updateNode=function(a,e){var g={keywords:f.convertList(e,"id")};return c.wrap(d.nodes.patch(b.workAreaId,a.id,g)).then(function(a){return f.getKeywords({nodes:a.id})})},f.getKeywords=function(a){return c.wrap(d.keywords.get(b.workAreaId,a))},f.addEmptyKeywords=function(a){for(var b=0;4>b;b++)void 0===a[b]&&a.push({});return a}}]),angular.module("navotron.addKeywords",["navotron.api"]).controller("addKeywords",["$scope","$modalInstance","createKeywords","workAreaId","nodeId","workAreaEvent","api",function(a,b,c,d,e,f,g){a.add=function(){if(a.keywordItems){var h=c(d,e,a.keywordItems.split("\n"));f.wrap(g.keywords.postBulk(d,h)).then(function(a){b.close(a)})}else a.cancel()},a.cancel=function(){b.dismiss("cancel")}}]).factory("createKeywords",["$filter",function(a){var b=function(a,b,c){var d={workarea:a,timestamp:null,keyword:c[0].trim(),nodes:b};return d},c=function(a,b){var c=!1;return angular.forEach(b,function(b){b.keyword===a.keyword&&(c=!0)}),c},d=function(a,d,e){var f,g=[];return angular.forEach(e,function(e){f=b(a,d,e.split(",")),c(f,this)||""!==f.keyword&&this.push(f)},g),g};return d}]),angular.module("navotron.updateKeywords",["navotron.api"]).controller("updateKeywords",["$scope","$modalInstance","workAreaId","currentNode","workAreaEvent","api",function(a,b,c,d,e,f){a.updateCurrentKeywords=function(){a.updateChoice="current",a.keywords=d.keywords},a.updateAllKeywords=function(){a.updateChoice="all",e.wrap(f.keywords.get(c)).then(function(b){a.keywords=b})},a.updateKeywordVolume=function(){e.wrap(f.keywords.updateVolume(c)).then(a.updateAllKeywords)},a.isCurrentUpdateChoice=function(b){return b===a.updateChoice},a.add=function(){b.close("result")},a.cancel=function(){b.dismiss("cancel")},a.updateCurrentKeywords()}]),angular.module("navotron.preview",["navotron.previewPage","navotron.previewHelp"]).directive("preview",["api","session",function(a,b){return{restrict:"E",templateUrl:"js/components/workArea/preview/preview.jade",scope:{nodes:"="},controller:["$scope",function(a){this.setHelpSection=function(b){a.helpSection=b}}]}}]),angular.module("navotron.previewHelp",[]).directive("helpText",function(){return{restrict:"E",transclude:!0,templateUrl:"js/components/workArea/preview/previewHelp/previewHelp.jade",scope:{helpSection:"="}}}),angular.module("navotron.previewPage",["navotron.previewText"]).directive("previewPage",function(){return{restrict:"E",require:"^workArea",transclude:!0,templateUrl:"js/components/workArea/preview/previewPage/previewPage.jade",scope:{nodes:"="},link:function(a,b,c,d){a.setActiveNode=function(b){a.activeNode=b,d.updateActiveNode(b)},a.toggle=function(a){a.active=!a.active},a.setParent=function(b){a.parentNode=b,a.childNodes=b.children},a.nodes.length>0&&(a.setActiveNode(a.nodes[0]),a.setParent(a.nodes[0]))}}}),angular.module("navotron.previewText",[]).directive("previewText",function(){return{restrict:"E",require:"^preview",templateUrl:"js/components/workArea/preview/previewText/previewText.jade",scope:{node:"="},link:function(a,b,c,d){a.previewCtrl=d}}}).directive("previewArea",function(){return{restrict:"E",template:"<div ng-transclude></div>",transclude:!0,scope:{},replace:!0,controller:["$scope",function(a){var b=this;this.showHelp=function(){b.textColor={color:"red"}},this.hideHelp=function(){b.textColor={color:"auto"}}}]}}).directive("previewSection",function(){return{restrict:"EA",require:"^previewArea",transclude:!0,templateUrl:"js/components/workArea/preview/previewText/previewSection.jade",scope:{},replace:!0,link:function(a,b,c,d){a.previewAreaCtrl=d}}}).directive("previewQuestion",function(){return{restrict:"EA",require:"^previewArea",transclude:!0,templateUrl:"js/components/workArea/preview/previewText/previewQuestion.jade",scope:{},replace:!0,link:function(a,b,c,d){a.previewAreaCtrl=d}}}),angular.module("navotron.resolver",[]).factory("workAreaResolver",["$state","workAreaHelper","nodeHelper","api",function(a,b,c,d){var e=function(e){return""!==e?d.workareas.getOne(e).then(function(a){return b.setActiveWorkarea(a),a}):b.createWorkarea("http://www.new-workarea.se").then(function(b){d.nodes.post(b.hash_id,c.newNode({name:"Home",workarea:b.hash_id})).then(function(c){return a.go("root.workArea.navigation",{workAreaId:b.hash_id}),b})})};return e}]).factory("nodeResolver",["$stateParams","api",function(a,b){var c=function(a){return""!==a?b.nodes.getNested(a):[]};return c}]),angular.module("navotron.workAreaSettings",[]).controller("settingsController",["formFactory","settingsFactory",function(a,b){this.formFactory=a,this.settingsFactory=b,this.settingsFactory.getWorkarea()}]).directive("workAreaSettings",function(){return{restrict:"E",templateUrl:"js/components/workArea/settings/settingsView.jade"}}).service("formFactory",function(){var a=this;a.trySubmitted=!1,a.fieldError=function(b){return b.$invalid&&(!b.$pristine||a.trySubmitted)},a.fieldRequired=function(b){return b.$error.required&&(!b.$pristine||a.trySubmitted)},a.fieldErrorOrRequired=function(b){return a.fieldError(b)||a.fieldRequired(b)}}).service("settingsFactory",["session","api","notification","workAreaHelper",function(a,b,c,d){var e=this;e.workArea=void 0,e.getWorkarea=function(){e.showSettings()&&b.workareas.getOne(a.activeWorkArea.hash_id).then(function(a){e.workArea=a})},e.showSettings=function(){return a.hasSetProperty("activeWorkArea")},e.saveWorkarea=function(){void 0!==e.workArea&&b.workareas.put(a.activeWorkArea.hash_id,e.workArea).then(function(a){e.workArea=d.setActiveWorkarea(a),c.success("All changes saved")})["catch"](function(a){c.error("All changes saved",a)})}}]),angular.module("navotron.workArea",["navotron.api","navotron.controlPanel","navotron.keywords","navotron.nodeArea","navotron.preview","navotron.showNode"]).directive("workArea",["nodeHelper",function(a){return{restrict:"E",templateUrl:"js/components/workArea/workAreaView.jade",scope:{},controller:["$scope","$state",function(b,c){b.state=c,this.updateActiveNode=function(c){a.setActiveNode(c),b.activeNode=c}}]}}]).factory("workAreaEvent",["$rootScope",function(a){var b=!1;return a.$on("nodetree.http.start",function(){b=!0}),a.$on("nodetree.http.stop",function(){b=!1}),{wrap:function(b){return a.$emit("nodetree.http.start"),b["finally"](function(){a.$emit("nodetree.http.stop")}),b},editing:function(){return b}}}]).service("workAreaHelper",["$timeout","session","api","workAreaEvent","notification",function(a,b,c,d,e){this.newWorkArea=function(a){return{site_url:a.siteUrl,owner:"undefined"!=typeof a.owner?a.owner:null,nodes:"undefined"!=typeof a.nodes?a.nodes:[],keywords:"undefined"!=typeof a.keywords?a.keywords:[]}},this.createWorkarea=function(a){var f=this.newWorkArea({siteUrl:a,owner:b.user.id});return d.wrap(c.workareas.post(f))["catch"](function(a){e.error("Could not create workarea",a)})},this.patchWorkarea=function(a,b){return d.wrap(c.workareas.patch(a,b))["catch"](function(a){return e.error("Could not update the workarea.",a),a})},this["delete"]=function(b,d){var e=this;return a(function(){b.deleting=!0},500),c.workareas["delete"](b.hash_id).then(function(a){return b.hash_id===e.getActiveWorkarea().hash_id&&e.setActiveWorkarea(void 0),a})},this.getActiveWorkarea=function(){return b.load(),b.activeWorkArea},this.setActiveWorkarea=function(a){return b.set("activeWorkArea",a),a}}]),angular.module("navotron.workAreaList",["navotron.api"]).directive("workAreaList",["workAreaHelper","api",function(a,b){return{restrict:"E",templateUrl:"js/components/workArea/workAreaListView.jade",controller:["$scope",function(c){b.workareas.get().then(function(a){c.workareas=a}),c["delete"]=function(b,d){a["delete"](b,d).then(function(a){c.workareas.splice(d,1)})}}]}}]),angular.module("navotron.datadef",[]).factory("datadef",function(){var a={};return a.SP1={search:"",ordering:"",limit:"",offset:""},a.SP2={search:"",ordering:"name",limit:"0",offset:"10"},a.SP3={search:"",ordering:"-name",limit:"10",offset:"10"},a.SP4={search:"linu",ordering:"name",limit:"10",offset:"100"},a.RURL_WORKAREA_LIST="/workareas",a.RURL_WORKAREA_DETAIL="/workareas/123",a.RURL_NODE_LIST="/workareas/123/nodes",a.RURL_NODE_DETAIL="/workareas/123/nodes/123",a.RURL_NODE_LIST="/workareas/123/nodes",a.RURL_NODE_DETAIL="/workareas/123/nodes/123",a.WA1={hash_id:"asdasd",site_url:"http://linus-little-haven.se",owner:1,country:"SE"},a.WA2={hash_id:"fwergwvfd",site_url:"http://my-special-place.se",owner:1,country:"SE"},a.WA3={hash_id:"asdascdscae",site_url:"http://the-rankor-cave.se",owner:2,country:"SE"},a.HTML1=$.parseHTML(["<ul>",'<li id="1" name="Home">',"<div>Home</div>","</li>",'<li id="5" name="Category">',"<div>Category</div>","<span>","<ul>",'<li id="2" name="Produkt 1">',"<div>Produkt 1</div>","</li>",'<li id="3" name="Product 2">',"<div>Product 2</div>","</li>",'<li id="4" name="Product 3">',"<div>Product 3</div>","</li>","</ul>","</span>","</li>","</ul>"].join("\n")),a.SQ1={keywords:["vår","fast elpris","elavtal"],country:"se",limit:100},a.SQ2={keywords:["party","moped"],country:"en",limit:100},a.SQ3={keywords:["i_do_not_exist_as_a_keyword","neither_do_I_my_friend"],country:"en",limit:100},a.SV1={volume:5400,timestamp:"2014-08-01",country:"EN",keyword:"comics"},a.SV2={volume:9900,timestamp:"2014-08-01",country:"EN",keyword:"comic"},a.SV3={volume:9900,timestamp:"2014-08-01",country:"EN",keyword:"batman comic"},a.SV4={volume:70,timestamp:"2014-08-01",country:"EN",keyword:"green lantern comic"},a.SV5={volume:390,timestamp:"2014-08-01",country:"EN",keyword:"superman comic"},a.SVR1={results:[a.SV1,a.SV2,a.SV3],total:3,took:2},a.SVR2={results:[],total:0,took:2},a.N1={id:"1",index:0,parentNode:null,workarea:"1",name:"Home",children:[],keywords:[]},a.N2={id:"2",index:0,parentNode:5,workarea:"1",name:"Superman",children:[],keywords:[a.SV5]},a.N3={id:"3",index:1,parentNode:5,workarea:"1",name:"Batman",children:[],keywords:[a.SV3]},a.N4={id:"4",index:2,parentNode:5,workarea:"1",name:"Green Lantern",children:[],keywords:[a.SV4]},a.N5={id:"5",index:1,parentNode:null,workarea:"1",name:"Comics",children:[a.N2,a.N3,a.N4],keywords:[a.SV1,a.SV2]},a.N6={id:"6",index:2,parentNode:null,workarea:"1",name:"About us",children:[],keywords:[]},a.N7={id:"7",index:3,parentNode:null,workarea:"1",name:"Contact us",children:[],keywords:[]},a});